<% layout('/layout/boilerplate') -%>
<body>
    <br>
    
    <div class="row">
        <div class="col-6 offset-3 ">
            <h2 class="mb-3 offset-1"><%= list.title%></h2>
    
    <div class="card" style="width: 30rem;">
        <img src="<%=list.image.url%>" class="card-img-top" alt="<%list.image.filename%>">
        <div class="card-body">
            <br>
          <h5 class="card-title "><%= list.title%></h5>
          <h5>  &#8377; <%=list.price.toLocaleString("en-IN")%>/Night</h5>
          <p class="card-text"><%= list.description %></p>
          <h6><%= list.location %> , <%= list.country %>  </h6>
         
        </div>
      </div>
<div class="detail-btn">
    <form action="/Tripsy/<%=list._id%>/edit" mathod="GET">
        <button class="btn btn-dark mb-3 add-btn offset-2">Edit</button>
    </form>
    <br>
    <form action="/Tripsy/<%=list._id%>/delete" mathod="GET">
        <button class="btn btn-dark mb-5 offset-3">Delete</button>
    </form>
</div>
<div class="review">
    <form action="/Tripsy/<%=list._id%>/newReview" method="post" class="p-4 border rounded shadow">
        <h4 class="mb-3">Leave a Review</h4>
        
        <div class="mb-3">
            <label for="rangeInput" class="form-label">Star Rating:</label>
            <input type="range" id="rangeInput" name="rangeInput" class="form-range" min="1" max="5" step="1" value="1" oninput="this.nextElementSibling.value = this.value">
            <output class="ms-2">1</output>
        </div>
        
        <div class="mb-3">
            <label for="comment" class="form-label">Comment:</label>
            <textarea name="comment" id="comment" class="form-control" rows="3" placeholder="Write your comment..." required></textarea>
        </div>
        
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
    <div class="show-review">
        <div class="card mb-3">
            <div class="card-body">
               

                <div class="show-review">
                    <% for (let review of list.reviews) { %>
                        <div class="card mb-3">
                            <div class="card-body">
                                <h5 class="card-title"><%= review.user %></h5> <!-- Assuming review.user holds the reviewer's name -->
                                <h6 class="card-subtitle mb-2 text-muted">Rating: ‚≠ê<%= review.rangeInput %>/5</h6>
                                <p class="card-text"><%= review.comment %></p>
                                <form action="/Tripsy/<%= list._id %>/deleteReview?_method=DELETE" method="POST">
                                    <input type="hidden" name="reviewId" value="<%= review._id %>">
                                    <button type="submit" class="btn btn-dark mb-5 offset-3">Delete</button>
                                </form>
                            </div>
                        </div>
                    <% } %>
                </div>
                


                
            </div>
        </div>
    </div>
    
</div>

</div>
</div>
    
    
    
</body>
